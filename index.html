<!DOCTYPE html>
<html>
    <body></body>
    <script>
        selections = ['rock', 'paper', 'scissors'];

        function randomInt(max){
            return Math.floor(Math.random() * max);
        }

        function computerPlay(){
            return selections[randomInt(3)];
        }

        function playRound(playerSelection, computerSelection){ // 0 = tie, 1 = computer won, 2 = human won
            playerSelection = playerSelection.toLowerCase();
            computerSelection = computerSelection.toLowerCase();

            let validSelections = selections.includes(playerSelection) && selections.includes(computerSelection);

            if (!(validSelections)){
                console.error('playRound() received invalid selections');
                return null;
            }

            if (playerSelection == computerSelection){
                return 0;
            }
            switch (playerSelection){
                case 'rock':
                    return (computerSelection == 'paper') ? 1 : 2;
                case 'paper':
                    return (computerSelection == 'scissors') ? 1 : 2;
                case 'scissors':
                    return (computerSelection == 'rock') ? 1 : 2;
                default:
                    console.error('Something went terribly wrong');
                    return null;
            }
        }

        function game(rounds){
            let computerScore = 0;
            let humanScore = 0;

            for (let i = 0; i < rounds; i++){
                let humanPlay = window.prompt('Round ' + (i+1) + ': Rock paper or scissors', 'rock');
                playResult = playRound(humanPlay , computerPlay());
                let roundResult;

                switch (playResult){
                    case 1:
                        computerScore++;
                        roundResult = 'computer wins';
                        break;
                    case 2:
                        humanScore++;
                        roundResult = 'human wins';
                        break;
                    default:
                        roundResult = 'tie';
                }
                console.log('Round: ' + (i+1) + ' out of 5 - ' + roundResult)
            }
            let message;
            if (computerScore > humanScore){
                message = 'Computer won!';
            } else if (humanScore > computerScore){
                message = 'Human won!';
            } else {
                message = 'Tie!';
            }
            console.log('Final result: ' + message);
        }

        game(5);
    </script>
</html>